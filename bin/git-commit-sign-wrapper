#!/bin/bash

# Alternative to setting auth sock is to exec op-ssh-sign which
# forces that (and therefore only works for local signing).
op_sock="$HOME/.1password/agent.sock"
if [[ -z "$SSH_CONNECTION" ]] && [[ -S "$op_sock" ]]; then
  export SSH_AUTH_SOCK="$op_sock"
fi

exec ssh-keygen "$@"
